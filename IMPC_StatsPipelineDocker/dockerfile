FROM rocker/r-ver:4.0.2

# ARG WHEN

# Magick++
RUN sudo apt update 
RUN sudo apt-get install build-essential
RUN wget https://www.imagemagick.org/download/ImageMagick.tar.gz
RUN tar xvzf ImageMagick.tar.gz
RUN cd ImageMagick-7.0.8-26/
RUN ./configure
RUN make
RUN sudo make install 
RUN sudo ldconfig /usr/local/lib



#sudo apt install libgsl-dev
#libxml2-devel
#sudo add-apt-repository -y ppa:opencpu/imagemagick
 #  sudo apt-get update
  # sudo apt-get install -y libmagick++-dev
   
   
   
   
# Make the home directory
RUN mkdir -p ~/IMPCStatsPipeline/jobs
CMD cd ~/IMPCStatsPipeline/jobs
# 
# RUN wget https://raw.githubusercontent.com/mpi2/impc_stats_pipeline/master/impc_statistical_pipeline/install_dependencies.R
# RUN Rscript "install_dependencies.R"
RUN R -e "source('https://raw.githubusercontent.com/mpi2/impc_stats_pipeline/master/impc_statistical_pipeline/install_dependencies.R')"


# RUN mkdir ~/mydocker/results 
# docker run -v ~/mydocker/results:/home/IMPCStatsPipeline  analysis
